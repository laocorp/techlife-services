Initializing deployment
Cloning Repo github.com/laocorp/techlife-services.git to /etc/dokploy/applications/techlifeservice-web-nlowax/code: ‚úÖ
Cloning into '/etc/dokploy/applications/techlifeservice-web-nlowax/code'...
remote: Enumerating objects: 238, done.
remote: Counting objects:   0% (1/238)        
remote: Counting objects:   1% (3/238)        
remote: Counting objects:   2% (5/238)        
remote: Counting objects:   3% (8/238)        
remote: Counting objects:   4% (10/238)        
remote: Counting objects:   5% (12/238)        
remote: Counting objects:   6% (15/238)        
remote: Counting objects:   7% (17/238)        
remote: Counting objects:   8% (20/238)        
remote: Counting objects:   9% (22/238)        
remote: Counting objects:  10% (24/238)        
remote: Counting objects:  11% (27/238)        
remote: Counting objects:  12% (29/238)        
remote: Counting objects:  13% (31/238)        
remote: Counting objects:  14% (34/238)        
remote: Counting objects:  15% (36/238)        
remote: Counting objects:  16% (39/238)        
remote: Counting objects:  17% (41/238)        
remote: Counting objects:  18% (43/238)        
remote: Counting objects:  19% (46/238)        
remote: Counting objects:  20% (48/238)        
remote: Counting objects:  21% (50/238)        
remote: Counting objects:  22% (53/238)        
remote: Counting objects:  23% (55/238)        
remote: Counting objects:  24% (58/238)        
remote: Counting objects:  25% (60/238)        
remote: Counting objects:  26% (62/238)        
remote: Counting objects:  27% (65/238)        
remote: Counting objects:  28% (67/238)        
remote: Counting objects:  29% (70/238)        
remote: Counting objects:  30% (72/238)        
remote: Counting objects:  31% (74/238)        
remote: Counting objects:  32% (77/238)        
remote: Counting objects:  33% (79/238)        
remote: Counting objects:  34% (81/238)        
remote: Counting objects:  35% (84/238)        
remote: Counting objects:  36% (86/238)        
remote: Counting objects:  37% (89/238)        
remote: Counting objects:  38% (91/238)        
remote: Counting objects:  39% (93/238)        
remote: Counting objects:  40% (96/238)        
remote: Counting objects:  41% (98/238)        
remote: Counting objects:  42% (100/238)        
remote: Counting objects:  43% (103/238)        
remote: Counting objects:  44% (105/238)        
remote: Counting objects:  45% (108/238)        
remote: Counting objects:  46% (110/238)        
remote: Counting objects:  47% (112/238)        
remote: Counting objects:  48% (115/238)        
remote: Counting objects:  49% (117/238)        
remote: Counting objects:  50% (119/238)        
remote: Counting objects:  51% (122/238)        
remote: Counting objects:  52% (124/238)        
remote: Counting objects:  53% (127/238)        
remote: Counting objects:  54% (129/238)        
remote: Counting objects:  55% (131/238)        
remote: Counting objects:  56% (134/238)        
remote: Counting objects:  57% (136/238)        
remote: Counting objects:  58% (139/238)        
remote: Counting objects:  59% (141/238)        
remote: Counting objects:  60% (143/238)        
remote: Counting objects:  61% (146/238)        
remote: Counting objects:  62% (148/238)        
remote: Counting objects:  63% (150/238)        
remote: Counting objects:  64% (153/238)        
remote: Counting objects:  65% (155/238)        
remote: Counting objects:  66% (158/238)        
remote: Counting objects:  67% (160/238)        
remote: Counting objects:  68% (162/238)        
remote: Counting objects:  69% (165/238)        
remote: Counting objects:  70% (167/238)        
remote: Counting objects:  71% (169/238)        
remote: Counting objects:  72% (172/238)        
remote: Counting objects:  73% (174/238)        
remote: Counting objects:  74% (177/238)        
remote: Counting objects:  75% (179/238)        
remote: Counting objects:  76% (181/238)        
remote: Counting objects:  77% (184/238)        
remote: Counting objects:  78% (186/238)        
remote: Counting objects:  79% (189/238)        
remote: Counting objects:  80% (191/238)        
remote: Counting objects:  81% (193/238)        
remote: Counting objects:  82% (196/238)        
remote: Counting objects:  83% (198/238)        
remote: Counting objects:  84% (200/238)        
remote: Counting objects:  85% (203/238)        
remote: Counting objects:  86% (205/238)        
remote: Counting objects:  87% (208/238)        
remote: Counting objects:  88% (210/238)        
remote: Counting objects:  89% (212/238)        
remote: Counting objects:  90% (215/238)        
remote: Counting objects:  91% (217/238)        
remote: Counting objects:  92% (219/238)        
remote: Counting objects:  93% (222/238)        
remote: Counting objects:  94% (224/238)        
remote: Counting objects:  95% (227/238)        
remote: Counting objects:  96% (229/238)        
remote: Counting objects:  97% (231/238)        
remote: Counting objects:  98% (234/238)        
remote: Counting objects:  99% (236/238)        
remote: Counting objects: 100% (238/238)        
remote: Counting objects: 100% (238/238), done.
remote: Compressing objects:   0% (1/182)        
remote: Compressing objects:   1% (2/182)        
remote: Compressing objects:   2% (4/182)        
remote: Compressing objects:   3% (6/182)        
remote: Compressing objects:   4% (8/182)        
remote: Compressing objects:   5% (10/182)        
remote: Compressing objects:   6% (11/182)        
remote: Compressing objects:   7% (13/182)        
remote: Compressing objects:   8% (15/182)        
remote: Compressing objects:   9% (17/182)        
remote: Compressing objects:  10% (19/182)        
remote: Compressing objects:  11% (21/182)        
remote: Compressing objects:  12% (22/182)        
remote: Compressing objects:  13% (24/182)        
remote: Compressing objects:  14% (26/182)        
remote: Compressing objects:  15% (28/182)        
remote: Compressing objects:  16% (30/182)        
remote: Compressing objects:  17% (31/182)        
remote: Compressing objects:  18% (33/182)        
remote: Compressing objects:  19% (35/182)        
remote: Compressing objects:  20% (37/182)        
remote: Compressing objects:  21% (39/182)        
remote: Compressing objects:  22% (41/182)        
remote: Compressing objects:  23% (42/182)        
remote: Compressing objects:  24% (44/182)        
remote: Compressing objects:  25% (46/182)        
remote: Compressing objects:  26% (48/182)        
remote: Compressing objects:  27% (50/182)        
remote: Compressing objects:  28% (51/182)        
remote: Compressing objects:  29% (53/182)        
remote: Compressing objects:  30% (55/182)        
remote: Compressing objects:  31% (57/182)        
remote: Compressing objects:  32% (59/182)        
remote: Compressing objects:  33% (61/182)        
remote: Compressing objects:  34% (62/182)        
remote: Compressing objects:  35% (64/182)        
remote: Compressing objects:  36% (66/182)        
remote: Compressing objects:  37% (68/182)        
remote: Compressing objects:  38% (70/182)        
remote: Compressing objects:  39% (71/182)        
remote: Compressing objects:  40% (73/182)        
remote: Compressing objects:  41% (75/182)        
remote: Compressing objects:  42% (77/182)        
remote: Compressing objects:  43% (79/182)        
remote: Compressing objects:  44% (81/182)        
remote: Compressing objects:  45% (82/182)        
remote: Compressing objects:  46% (84/182)        
remote: Compressing objects:  47% (86/182)        
remote: Compressing objects:  48% (88/182)        
remote: Compressing objects:  49% (90/182)        
remote: Compressing objects:  50% (91/182)        
remote: Compressing objects:  51% (93/182)        
remote: Compressing objects:  52% (95/182)        
remote: Compressing objects:  53% (97/182)        
remote: Compressing objects:  54% (99/182)        
remote: Compressing objects:  55% (101/182)        
remote: Compressing objects:  56% (102/182)        
remote: Compressing objects:  57% (104/182)        
remote: Compressing objects:  58% (106/182)        
remote: Compressing objects:  59% (108/182)        
remote: Compressing objects:  60% (110/182)        
remote: Compressing objects:  61% (112/182)        
remote: Compressing objects:  62% (113/182)        
remote: Compressing objects:  63% (115/182)        
remote: Compressing objects:  64% (117/182)        
remote: Compressing objects:  65% (119/182)        
remote: Compressing objects:  66% (121/182)        
remote: Compressing objects:  67% (122/182)        
remote: Compressing objects:  68% (124/182)        
remote: Compressing objects:  69% (126/182)        
remote: Compressing objects:  70% (128/182)        
remote: Compressing objects:  71% (130/182)        
remote: Compressing objects:  72% (132/182)        
remote: Compressing objects:  73% (133/182)        
remote: Compressing objects:  74% (135/182)        
remote: Compressing objects:  75% (137/182)        
remote: Compressing objects:  76% (139/182)        
remote: Compressing objects:  77% (141/182)        
remote: Compressing objects:  78% (142/182)        
remote: Compressing objects:  79% (144/182)        
remote: Compressing objects:  80% (146/182)        
remote: Compressing objects:  81% (148/182)        
remote: Compressing objects:  82% (150/182)        
remote: Compressing objects:  83% (152/182)        
remote: Compressing objects:  84% (153/182)        
remote: Compressing objects:  85% (155/182)        
remote: Compressing objects:  86% (157/182)        
remote: Compressing objects:  87% (159/182)        
remote: Compressing objects:  88% (161/182)        
remote: Compressing objects:  89% (162/182)        
remote: Compressing objects:  90% (164/182)        
remote: Compressing objects:  91% (166/182)        
remote: Compressing objects:  92% (168/182)        
remote: Compressing objects:  93% (170/182)        
remote: Compressing objects:  94% (172/182)        
remote: Compressing objects:  95% (173/182)        
remote: Compressing objects:  96% (175/182)        
remote: Compressing objects:  97% (177/182)        
remote: Compressing objects:  98% (179/182)        
remote: Compressing objects:  99% (181/182)        
remote: Compressing objects: 100% (182/182)        
remote: Compressing objects: 100% (182/182), done.
Receiving objects:   0% (1/238)
Receiving objects:   1% (3/238)
Receiving objects:   2% (5/238)
Receiving objects:   3% (8/238)
Receiving objects:   4% (10/238)
Receiving objects:   5% (12/238)
Receiving objects:   6% (15/238)
Receiving objects:   7% (17/238)
Receiving objects:   8% (20/238)
Receiving objects:   9% (22/238)
Receiving objects:  10% (24/238)
Receiving objects:  11% (27/238)
Receiving objects:  12% (29/238)
Receiving objects:  13% (31/238)
Receiving objects:  14% (34/238)
Receiving objects:  15% (36/238)
Receiving objects:  16% (39/238)
Receiving objects:  17% (41/238)
Receiving objects:  18% (43/238)
Receiving objects:  19% (46/238)
Receiving objects:  20% (48/238)
Receiving objects:  21% (50/238)
Receiving objects:  22% (53/238)
Receiving objects:  23% (55/238)
Receiving objects:  24% (58/238)
Receiving objects:  25% (60/238)
Receiving objects:  26% (62/238)
Receiving objects:  27% (65/238)
Receiving objects:  28% (67/238)
Receiving objects:  29% (70/238)
Receiving objects:  30% (72/238)
Receiving objects:  31% (74/238)
Receiving objects:  32% (77/238)
Receiving objects:  33% (79/238)
Receiving objects:  34% (81/238)
Receiving objects:  35% (84/238)
Receiving objects:  36% (86/238)
Receiving objects:  37% (89/238)
Receiving objects:  38% (91/238)
Receiving objects:  39% (93/238)
Receiving objects:  40% (96/238)
Receiving objects:  41% (98/238)
Receiving objects:  42% (100/238)
Receiving objects:  43% (103/238)
Receiving objects:  44% (105/238)
Receiving objects:  45% (108/238)
Receiving objects:  46% (110/238)
Receiving objects:  47% (112/238)
Receiving objects:  48% (115/238)
Receiving objects:  49% (117/238)
Receiving objects:  50% (119/238)
Receiving objects:  51% (122/238)
Receiving objects:  52% (124/238)
Receiving objects:  53% (127/238)
Receiving objects:  54% (129/238)
Receiving objects:  55% (131/238)
Receiving objects:  56% (134/238)
Receiving objects:  57% (136/238)
Receiving objects:  58% (139/238)
Receiving objects:  59% (141/238)
Receiving objects:  60% (143/238)
Receiving objects:  61% (146/238)
Receiving objects:  62% (148/238)
Receiving objects:  63% (150/238)
Receiving objects:  64% (153/238)
Receiving objects:  65% (155/238)
Receiving objects:  66% (158/238)
Receiving objects:  67% (160/238)
Receiving objects:  68% (162/238)
Receiving objects:  69% (165/238)
Receiving objects:  70% (167/238)
Receiving objects:  71% (169/238)
Receiving objects:  72% (172/238)
Receiving objects:  73% (174/238)
Receiving objects:  74% (177/238)
Receiving objects:  75% (179/238)
Receiving objects:  76% (181/238)
remote: Total 238 (delta 32), reused 216 (delta 25), pack-reused 0 (from 0)
Receiving objects:  77% (184/238)
Receiving objects:  78% (186/238)
Receiving objects:  79% (189/238)
Receiving objects:  80% (191/238)
Receiving objects:  81% (193/238)
Receiving objects:  82% (196/238)
Receiving objects:  83% (198/238)
Receiving objects:  84% (200/238)
Receiving objects:  85% (203/238)
Receiving objects:  86% (205/238)
Receiving objects:  87% (208/238)
Receiving objects:  88% (210/238)
Receiving objects:  89% (212/238)
Receiving objects:  90% (215/238)
Receiving objects:  91% (217/238)
Receiving objects:  92% (219/238)
Receiving objects:  93% (222/238)
Receiving objects:  94% (224/238)
Receiving objects:  95% (227/238)
Receiving objects:  96% (229/238)
Receiving objects:  97% (231/238)
Receiving objects:  98% (234/238)
Receiving objects:  99% (236/238)
Receiving objects: 100% (238/238)
Receiving objects: 100% (238/238), 246.85 KiB | 9.87 MiB/s, done.
Resolving deltas:   0% (0/32)
Resolving deltas:   3% (1/32)
Resolving deltas:   6% (2/32)
Resolving deltas:   9% (3/32)
Resolving deltas:  12% (4/32)
Resolving deltas:  15% (5/32)
Resolving deltas:  21% (7/32)
Resolving deltas:  25% (8/32)
Resolving deltas:  28% (9/32)
Resolving deltas:  31% (10/32)
Resolving deltas:  34% (11/32)
Resolving deltas:  37% (12/32)
Resolving deltas:  40% (13/32)
Resolving deltas:  43% (14/32)
Resolving deltas:  46% (15/32)
Resolving deltas:  50% (16/32)
Resolving deltas:  53% (17/32)
Resolving deltas:  56% (18/32)
Resolving deltas:  59% (19/32)
Resolving deltas:  62% (20/32)
Resolving deltas:  65% (21/32)
Resolving deltas:  68% (22/32)
Resolving deltas:  71% (23/32)
Resolving deltas:  75% (24/32)
Resolving deltas:  78% (25/32)
Resolving deltas:  81% (26/32)
Resolving deltas:  84% (27/32)
Resolving deltas:  87% (28/32)
Resolving deltas:  90% (29/32)
Resolving deltas:  93% (30/32)
Resolving deltas:  96% (31/32)
Resolving deltas: 100% (32/32)
Resolving deltas: 100% (32/32), done.
Starting nixpacks build...
‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê Nixpacks v1.41.0 ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
‚ïë setup      ‚îÇ nodejs_24, npm-9_x ‚ïë
‚ïë‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ïë
‚ïë install    ‚îÇ npm ci             ‚ïë
‚ïë‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ïë
‚ïë build      ‚îÇ npm run build      ‚ïë
‚ïë‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ïë
‚ïë start      ‚îÇ npm run start      ‚ïë
‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù
#0 building with "default" instance using docker driver
#1 [internal] load build definition from Dockerfile
#1 transferring dockerfile: 1.29kB 0.0s done
#1 DONE 0.1s
#2 [internal] load metadata for ghcr.io/railwayapp/nixpacks:ubuntu-1745885067
#2 DONE 0.4s
#3 [internal] load .dockerignore
#3 transferring context: 2B done
#3 DONE 0.0s
#4 [stage-0  1/10] FROM ghcr.io/railwayapp/nixpacks:ubuntu-1745885067@sha256:d45c89d80e13d7ad0fd555b5130f22a866d9dd10e861f589932303ef2314c7de
#4 DONE 0.0s
#5 [internal] load build context
#5 transferring context: 1.27MB 0.1s done
#5 DONE 0.1s
#6 [stage-0  2/10] WORKDIR /app/
#6 CACHED
#7 [stage-0  3/10] COPY .nixpacks/nixpkgs-23f9169c4ccce521379e602cc82ed873a1f1b52b.nix .nixpacks/nixpkgs-23f9169c4ccce521379e602cc82ed873a1f1b52b.nix
#7 CACHED
#8 [stage-0  4/10] RUN nix-env -if .nixpacks/nixpkgs-23f9169c4ccce521379e602cc82ed873a1f1b52b.nix && nix-collect-garbage -d
#8 CACHED
#9 [stage-0  5/10] COPY . /app/.
#9 DONE 0.2s
#10 [stage-0  6/10] RUN --mount=type=cache,id=KBJiPX57Xfg-/root/npm,target=/root/.npm npm ci
#10 0.988 npm warn config production Use `--omit=dev` instead.
#10 29.93
#10 29.93 added 637 packages, and audited 638 packages in 29s
#10 29.93
#10 29.93 196 packages are looking for funding
#10 29.93   run `npm fund` for details
#10 29.93
#10 29.93 found 0 vulnerabilities
#10 DONE 30.4s
#11 [stage-0  7/10] COPY . /app/.
#11 DONE 0.4s
#12 [stage-0  8/10] RUN --mount=type=cache,id=KBJiPX57Xfg-next/cache,target=/app/.next/cache --mount=type=cache,id=KBJiPX57Xfg-node_modules/cache,target=/app/node_modules/.cache npm run build
#12 0.988 npm warn config production Use `--omit=dev` instead.
#12 1.055
#12 1.055 > web@0.1.0 build
#12 1.055 > next build
#12 1.055
#12 3.460 ‚ñ≤ Next.js 16.1.3 (Turbopack)
#12 3.461
#12 3.468 ‚ö† The "middleware" file convention is deprecated. Please use "proxy" instead. Learn more: https://nextjs.org/docs/messages/middleware-to-proxy
#12 3.575   Creating an optimized production build ...
#12 29.46 ‚úì Compiled successfully in 24.9s
#12 29.57   Running TypeScript ...
#12 48.49 Failed to compile.
#12 48.49
#12 48.49 ./src/components/features/inventory/ProductForm.tsx:139:70
#12 48.49 Type error: Argument of type '{ cost_price: number; sale_price: number; min_stock: number; initial_stock: number; public_price: number | null; name?: string | undefined; description?: string | undefined; sku?: string | undefined; type?: "product" | "service" | undefined; category?: string | undefined; is_public?: boolean | undefined; images?: st...' is not assignable to parameter of type 'Partial<ProductFormData>'.
#12 48.49   Types of property 'public_price' are incompatible.
#12 48.49     Type 'number | null' is not assignable to type 'number | undefined'.
#12 48.49       Type 'null' is not assignable to type 'number | undefined'.
#12 48.49
#12 48.49 [0m [90m 137 |[39m             [36mlet[39m result
#12 48.49  [90m 138 |[39m             [36mif[39m (isEdit) {
#12 48.49 [31m[1m>[22m[39m[90m 139 |[39m                 result [33m=[39m [36mawait[39m updateProductAction(productToEdit[33m.[39mid[33m,[39m finalData)
#12 48.49  [90m     |[39m                                                                      [31m[1m^[22m[39m
#12 48.49  [90m 140 |[39m             } [36melse[39m {
#12 48.49  [90m 141 |[39m                 result [33m=[39m [36mawait[39m createProductAction(finalData [36mas[39m [33mProductFormData[39m)
#12 48.49  [90m 142 |[39m             }[0m
#12 48.80 Next.js build worker exited with code: 1 and signal: null
#12 ERROR: process "/bin/bash -ol pipefail -c npm run build" did not complete successfully: exit code: 1
------
> [stage-0  8/10] RUN --mount=type=cache,id=KBJiPX57Xfg-next/cache,target=/app/.next/cache --mount=type=cache,id=KBJiPX57Xfg-node_modules/cache,target=/app/node_modules/.cache npm run build:
48.49       Type 'null' is not assignable to type 'number | undefined'.
48.49
48.49 [0m [90m 137 |[39m             [36mlet[39m result
48.49  [90m 138 |[39m             [36mif[39m (isEdit) {
48.49 [31m[1m>[22m[39m[90m 139 |[39m                 result [33m=[39m [36mawait[39m updateProductAction(productToEdit[33m.[39mid[33m,[39m finalData)
48.49  [90m     |[39m                                                                      [31m[1m^[22m[39m
48.49  [90m 140 |[39m             } [36melse[39m {
48.49  [90m 141 |[39m                 result [33m=[39m [36mawait[39m createProductAction(finalData [36mas[39m [33mProductFormData[39m)
48.49  [90m 142 |[39m             }[0m
48.80 Next.js build worker exited with code: 1 and signal: null
------
[33m3 warnings found (use docker --debug to expand):
[0m - SecretsUsedInArgOrEnv: Do not use ARG or ENV instructions for sensitive data (ARG "SUPABASE_SERVICE_ROLE_KEY") (line 11)
- SecretsUsedInArgOrEnv: Do not use ARG or ENV instructions for sensitive data (ENV "SUPABASE_SERVICE_ROLE_KEY") (line 12)
- UndefinedVar: Usage of undefined variable '$NIXPACKS_PATH' (line 18)
Dockerfile:24
--------------------
|     # build phase
|     COPY . /app/.
| >>> RUN --mount=type=cache,id=KBJiPX57Xfg-next/cache,target=/app/.next/cache --mount=type=cache,id=KBJiPX57Xfg-node_modules/cache,target=/app/node_modules/.cache npm run build
|
|
--------------------
ERROR: failed to build: failed to solve: process "/bin/bash -ol pipefail -c npm run build" did not complete successfully: exit code: 1
Error: Docker build failed
‚ùå Nixpacks build failed
Error occurred ‚ùå, check the logs for details.